***REMOVED***
Tools for matplotlib plot exporting
***REMOVED***


def ipynb_vega_init(***REMOVED***:
    ***REMOVED***Initialize the IPython notebook display elements

    This function borrows heavily from the excellent vincent package:
    http://github.com/wrobstory/vincent
    ***REMOVED***
    ***REMOVED***
        from IPython.core.display import display, HTML
    except ImportError:
        print('IPython Notebook could not be loaded.'***REMOVED***

    require_js = '''
    if (window['d3'***REMOVED*** === undefined***REMOVED*** {{
        require.config({{ paths: {{d3: "http://d3js.org/d3.v3.min"***REMOVED******REMOVED*** ***REMOVED******REMOVED******REMOVED***;
        require(["d3"***REMOVED***, function(d3***REMOVED*** {{
          window.d3 = d3;
      ***REMOVED***0***REMOVED***
    ***REMOVED******REMOVED******REMOVED***;
***REMOVED******REMOVED***;
    if (window['topojson'***REMOVED*** === undefined***REMOVED*** {{
        require.config(
        ***REMOVED***{ paths: {{topojson: "http://d3js.org/topojson.v1.min"***REMOVED******REMOVED*** ***REMOVED******REMOVED***
            ***REMOVED***;
        require(["topojson"***REMOVED***, function(topojson***REMOVED*** {{
          window.topojson = topojson;
    ***REMOVED******REMOVED******REMOVED***;
***REMOVED******REMOVED***;
    '''
    d3_geo_projection_js_url = "http://d3js.org/d3.geo.projection.v0.min.js"
    d3_layout_cloud_js_url = ("http://wrobstory.github.io/d3-cloud/"
                              "d3.layout.cloud.js"***REMOVED***
    topojson_js_url = "http://d3js.org/topojson.v1.min.js"
    vega_js_url = 'http://trifacta.github.com/vega/vega.js'

    dep_libs = '''$.getScript("%s", function(***REMOVED*** {
        $.getScript("%s", function(***REMOVED*** {
            $.getScript("%s", function(***REMOVED*** {
                $.getScript("%s", function(***REMOVED*** {
                        $([IPython.events***REMOVED******REMOVED***.trigger("vega_loaded.vincent"***REMOVED***;
            ***REMOVED******REMOVED***
        ***REMOVED******REMOVED***
    ***REMOVED******REMOVED***
***REMOVED******REMOVED***;''' % (d3_geo_projection_js_url, d3_layout_cloud_js_url,
              topojson_js_url, vega_js_url***REMOVED***
    load_js = require_js.format(dep_libs***REMOVED***
    html = '<script>'+load_js+'</script>'
    display(HTML(html***REMOVED******REMOVED***
