from __future__ import absolute_import, division, unicode_literals

from xml.dom import Node

from . import _base


class TreeWalker(_base.NonRecursiveTreeWalker***REMOVED***:
    def getNodeDetails(self, node***REMOVED***:
        if node.nodeType == Node.DOCUMENT_TYPE_NODE:
            return _base.DOCTYPE, node.name, node.publicId, node.systemId

        elif node.nodeType in (Node.TEXT_NODE, Node.CDATA_SECTION_NODE***REMOVED***:
            return _base.TEXT, node.nodeValue

        elif node.nodeType == Node.ELEMENT_NODE:
            attrs = {***REMOVED***
            for attr in list(node.attributes.keys(***REMOVED******REMOVED***:
                attr = node.getAttributeNode(attr***REMOVED***
                if attr.namespaceURI:
                    attrs[(attr.namespaceURI, attr.localName***REMOVED******REMOVED*** = attr.value
                else:
                    attrs[(None, attr.name***REMOVED******REMOVED*** = attr.value
            return (_base.ELEMENT, node.namespaceURI, node.nodeName,
                    attrs, node.hasChildNodes(***REMOVED******REMOVED***

        elif node.nodeType == Node.COMMENT_NODE:
            return _base.COMMENT, node.nodeValue

        elif node.nodeType in (Node.DOCUMENT_NODE, Node.DOCUMENT_FRAGMENT_NODE***REMOVED***:
            return (_base.DOCUMENT,***REMOVED***

        else:
            return _base.UNKNOWN, node.nodeType

    def getFirstChild(self, node***REMOVED***:
        return node.firstChild

    def getNextSibling(self, node***REMOVED***:
        return node.nextSibling

    def getParentNode(self, node***REMOVED***:
        return node.parentNode
