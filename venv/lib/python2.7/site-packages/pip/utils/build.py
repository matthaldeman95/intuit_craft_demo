from __future__ import absolute_import

***REMOVED***.path
import tempfile

from pip.utils import rmtree


class BuildDirectory(object***REMOVED***:

    def __init__(self, name=None, delete=None***REMOVED***:
        # If we were not given an explicit directory, and we were not given an
        # explicit delete option, then we'll default to deleting.
        if name is None and delete is None:
            delete = True

        if name is None:
            # We realpath here because some systems have their default tmpdir
            # symlinked to another directory.  This tends to confuse build
            # scripts, so we canonicalize the path by traversing potential
            # symlinks here.
            name = os.path.realpath(tempfile.mkdtemp(prefix="pip-build-"***REMOVED******REMOVED***
            # If we were not given an explicit directory, and we were not given
            # an explicit delete option, then we'll default to deleting.
            if delete is None:
                delete = True

        self.name = name
        self.delete = delete

    def __repr__(self***REMOVED***:
        return "<{***REMOVED*** {!r***REMOVED***>".format(self.__class__.__name__, self.name***REMOVED***

    def __enter__(self***REMOVED***:
        return self.name

    def __exit__(self, exc, value, tb***REMOVED***:
        self.cleanup(***REMOVED***

    def cleanup(self***REMOVED***:
        if self.delete:
            rmtree(self.name***REMOVED***
