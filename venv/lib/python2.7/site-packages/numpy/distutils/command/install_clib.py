from __future__ import division, absolute_import, print_function

***REMOVED***
from distutils.core import Command
from distutils.ccompiler import new_compiler
from numpy.distutils.misc_util import get_cmd

class install_clib(Command***REMOVED***:
    description = "Command to install installable C libraries"

    user_options = [***REMOVED***

    def initialize_options(self***REMOVED***:
        self.install_dir = None
        self.outfiles = [***REMOVED***

    def finalize_options(self***REMOVED***:
        self.set_undefined_options('install', ('install_lib', 'install_dir'***REMOVED******REMOVED***

    def run (self***REMOVED***:
        build_clib_cmd = get_cmd("build_clib"***REMOVED***
        build_dir = build_clib_cmd.build_clib

        # We need the compiler to get the library name -> filename association
        if not build_clib_cmd.compiler:
            compiler = new_compiler(compiler=None***REMOVED***
            compiler.customize(self.distribution***REMOVED***
        else:
            compiler = build_clib_cmd.compiler

        for l in self.distribution.installed_libraries:
            target_dir = os.path.join(self.install_dir, l.target_dir***REMOVED***
            name = compiler.library_filename(l.name***REMOVED***
            source = os.path.join(build_dir, name***REMOVED***
            self.mkpath(target_dir***REMOVED***
            self.outfiles.append(self.copy_file(source, target_dir***REMOVED***[0***REMOVED******REMOVED***

    def get_outputs(self***REMOVED***:
        return self.outfiles
