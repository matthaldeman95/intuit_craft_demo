***REMOVED*** Functions for converting from DOS to UNIX line endings

***REMOVED***
from __future__ import division, absolute_import, print_function

import sys, re, os

def dos2unix(file***REMOVED***:
    "Replace CRLF with LF in argument files.  Print names of changed files."
    if os.path.isdir(file***REMOVED***:
        print(file, "Directory!"***REMOVED***
        return

    data = open(file, "rb"***REMOVED***.read(***REMOVED***
    if '\0' in data:
        print(file, "Binary!"***REMOVED***
        return

    newdata = re.sub("\r\n", "\n", data***REMOVED***
    if newdata != data:
        print('dos2unix:', file***REMOVED***
        f = open(file, "wb"***REMOVED***
        f.write(newdata***REMOVED***
        f.close(***REMOVED***
        return file
    else:
        print(file, 'ok'***REMOVED***

def dos2unix_one_dir(modified_files, dir_name, file_names***REMOVED***:
    for file in file_names:
        full_path = os.path.join(dir_name, file***REMOVED***
        file = dos2unix(full_path***REMOVED***
        if file is not None:
            modified_files.append(file***REMOVED***

def dos2unix_dir(dir_name***REMOVED***:
    modified_files = [***REMOVED***
    os.path.walk(dir_name, dos2unix_one_dir, modified_files***REMOVED***
    return modified_files
#----------------------------------

def unix2dos(file***REMOVED***:
    "Replace LF with CRLF in argument files.  Print names of changed files."
    if os.path.isdir(file***REMOVED***:
        print(file, "Directory!"***REMOVED***
        return

    data = open(file, "rb"***REMOVED***.read(***REMOVED***
    if '\0' in data:
        print(file, "Binary!"***REMOVED***
        return
    newdata = re.sub("\r\n", "\n", data***REMOVED***
    newdata = re.sub("\n", "\r\n", newdata***REMOVED***
    if newdata != data:
        print('unix2dos:', file***REMOVED***
        f = open(file, "wb"***REMOVED***
        f.write(newdata***REMOVED***
        f.close(***REMOVED***
        return file
    else:
        print(file, 'ok'***REMOVED***

def unix2dos_one_dir(modified_files, dir_name, file_names***REMOVED***:
    for file in file_names:
        full_path = os.path.join(dir_name, file***REMOVED***
        unix2dos(full_path***REMOVED***
        if file is not None:
            modified_files.append(file***REMOVED***

def unix2dos_dir(dir_name***REMOVED***:
    modified_files = [***REMOVED***
    os.path.walk(dir_name, unix2dos_one_dir, modified_files***REMOVED***
    return modified_files

if __name__ == "__main__":
    dos2unix_dir(sys.argv[1***REMOVED******REMOVED***
