***REMOVED***distutils.extension

Provides the Extension class, used to describe C/C++ extension
modules in setup scripts.

Overridden to support f2py.

***REMOVED***
from __future__ import division, absolute_import, print_function

import sys
import re
from distutils.extension import Extension as old_Extension

if sys.version_info[0***REMOVED*** >= 3:
    basestring = str


cxx_ext_re = re.compile(r'.*[.***REMOVED***(cpp|cxx|cc***REMOVED***\Z', re.I***REMOVED***.match
fortran_pyf_ext_re = re.compile(r'.*[.***REMOVED***(f90|f95|f77|for|ftn|f|pyf***REMOVED***\Z', re.I***REMOVED***.match

class Extension(old_Extension***REMOVED***:
    def __init__ (
            self, name, sources,
            include_dirs=None,
            define_macros=None,
            undef_macros=None,
            library_dirs=None,
            libraries=None,
            runtime_library_dirs=None,
            extra_objects=None,
            extra_compile_args=None,
            extra_link_args=None,
            export_symbols=None,
            swig_opts=None,
            depends=None,
            language=None,
            f2py_options=None,
            module_dirs=None,
            extra_f77_compile_args=None,
            extra_f90_compile_args=None,***REMOVED***:

        old_Extension.__init__(
                self, name, [***REMOVED***,
                include_dirs=include_dirs,
                define_macros=define_macros,
                undef_macros=undef_macros,
                library_dirs=library_dirs,
                libraries=libraries,
                runtime_library_dirs=runtime_library_dirs,
                extra_objects=extra_objects,
                extra_compile_args=extra_compile_args,
                extra_link_args=extra_link_args,
                export_symbols=export_symbols***REMOVED***

        # Avoid assert statements checking that sources contains strings:
        self.sources = sources

        # Python 2.4 distutils new features
        self.swig_opts = swig_opts or [***REMOVED***
        # swig_opts is assumed to be a list. Here we handle the case where it
        # is specified as a string instead.
        if isinstance(self.swig_opts, basestring***REMOVED***:
            import warnings
            msg = "swig_opts is specified as a string instead of a list"
            warnings.warn(msg, SyntaxWarning***REMOVED***
            self.swig_opts = self.swig_opts.split(***REMOVED***

        # Python 2.3 distutils new features
        self.depends = depends or [***REMOVED***
        self.language = language

        # numpy_distutils features
        self.f2py_options = f2py_options or [***REMOVED***
        self.module_dirs = module_dirs or [***REMOVED***
        self.extra_f77_compile_args = extra_f77_compile_args or [***REMOVED***
        self.extra_f90_compile_args = extra_f90_compile_args or [***REMOVED***

        return

    def has_cxx_sources(self***REMOVED***:
        for source in self.sources:
            if cxx_ext_re(str(source***REMOVED******REMOVED***:
                return True
        return False

    def has_f2py_sources(self***REMOVED***:
        for source in self.sources:
            if fortran_pyf_ext_re(source***REMOVED***:
                return True
        return False

# class Extension
