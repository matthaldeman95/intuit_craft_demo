#!/usr/bin/env python
***REMOVED***
setup.py for installing F2PY

Usage:
   python setup.py install

Copyright 2001-2005 Pearu Peterson all rights reserved,
Pearu Peterson <pearu@cens.ioc.ee>
Permission to use, modify, and distribute this software is given under the
terms of the NumPy License.

NO WARRANTY IS EXPRESSED OR IMPLIED.  USE AT YOUR OWN RISK.
$Revision: 1.32 $
$Date: 2005/01/30 17:22:14 $
Pearu Peterson

***REMOVED***
from __future__ import division, print_function

__version__ = "$Id: setup.py,v 1.32 2005/01/30 17:22:14 pearu Exp $"

***REMOVED***
import sys
from distutils.dep_util import newer
from numpy.distutils import log
from numpy.distutils.core import setup
from numpy.distutils.misc_util import Configuration

from __version__ import version


def _get_f2py_shebang(***REMOVED***:
    ***REMOVED*** Return shebang line for f2py script

    If we are building a binary distribution format, then the shebang line
    should be ``#!python`` rather than ``#!`` followed by the contents of
    ``sys.executable``.
    ***REMOVED***
    if set(('bdist_wheel', 'bdist_egg', 'bdist_wininst',
            'bdist_rpm'***REMOVED******REMOVED***.intersection(sys.argv***REMOVED***:
        return '#!python'
    return '#!' + sys.executable


def configuration(parent_package='', top_path=None***REMOVED***:
    config = Configuration('f2py', parent_package, top_path***REMOVED***

    config.add_data_dir('tests'***REMOVED***

    config.add_data_files('src/fortranobject.c',
                          'src/fortranobject.h',
                          ***REMOVED***

    config.make_svn_version_py(***REMOVED***

    def generate_f2py_py(build_dir***REMOVED***:
        f2py_exe = 'f2py' + os.path.basename(sys.executable***REMOVED***[6:***REMOVED***
        if f2py_exe[-4:***REMOVED*** == '.exe':
            f2py_exe = f2py_exe[:-4***REMOVED*** + '.py'
        if 'bdist_wininst' in sys.argv and f2py_exe[-3:***REMOVED*** != '.py':
            f2py_exe = f2py_exe + '.py'
        target = os.path.join(build_dir, f2py_exe***REMOVED***
        if newer(__file__, target***REMOVED***:
            log.info('Creating %s', target***REMOVED***
            f = open(target, 'w'***REMOVED***
            f.write(_get_f2py_shebang(***REMOVED*** + '\n'***REMOVED***
            mainloc = os.path.join(os.path.dirname(__file__***REMOVED***, "__main__.py"***REMOVED***
            with open(mainloc***REMOVED*** as mf:
                f.write(mf.read(***REMOVED******REMOVED***
            f.close(***REMOVED***
        return target

    config.add_scripts(generate_f2py_py***REMOVED***

    log.info('F2PY Version %s', config.get_version(***REMOVED******REMOVED***

    return config

if __name__ == "__main__":

    config = configuration(top_path=''***REMOVED***
    print('F2PY Version', version***REMOVED***
    config = config.todict(***REMOVED***

    config['download_url'***REMOVED*** = "http://cens.ioc.ee/projects/f2py2e/2.x"\
                             "/F2PY-2-latest.tar.gz"
    config['classifiers'***REMOVED*** = [
        'Development Status :: 5 - Production/Stable',
        'Intended Audience :: Developers',
        'Intended Audience :: Science/Research',
        'License :: OSI Approved :: NumPy License',
        'Natural Language :: English',
        'Operating System :: OS Independent',
        'Programming Language :: C',
        'Programming Language :: Fortran',
        'Programming Language :: Python',
        'Topic :: Scientific/Engineering',
        'Topic :: Software Development :: Code Generators',
    ***REMOVED***
    setup(version=version,
          description="F2PY - Fortran to Python Interface Generaton",
          author="Pearu Peterson",
          author_email="pearu@cens.ioc.ee",
          maintainer="Pearu Peterson",
          maintainer_email="pearu@cens.ioc.ee",
          license="BSD",
          platforms="Unix, Windows (mingw|cygwin***REMOVED***, Mac OSX",
          long_description=***REMOVED***\
The Fortran to Python Interface Generator, or F2PY for short, is a
command line tool (f2py***REMOVED*** for generating Python C/API modules for
wrapping Fortran 77/90/95 subroutines, accessing common blocks from
Python, and calling Python functions from Fortran (call-backs***REMOVED***.
Interfacing subroutines/data from Fortran 90/95 modules is supported.***REMOVED***,
          url="http://cens.ioc.ee/projects/f2py2e/",
          keywords=['Fortran', 'f2py'***REMOVED***,
          **config***REMOVED***
