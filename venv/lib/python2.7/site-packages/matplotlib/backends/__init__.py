from __future__ import (absolute_import, division, print_function,
                        unicode_literals***REMOVED***

from matplotlib.externals import six

import matplotlib
import inspect
import warnings

# ipython relies on interactive_bk being defined here
from matplotlib.rcsetup import interactive_bk

__all__ = ['backend','show','draw_if_interactive',
           'new_figure_manager', 'backend_version'***REMOVED***

backend = matplotlib.get_backend(***REMOVED*** # validates, to match all_backends

def pylab_setup(***REMOVED***:
    'return new_figure_manager, draw_if_interactive and show for pylab'
    # Import the requested backend into a generic module object

    if backend.startswith('module://'***REMOVED***:
        backend_name = backend[9:***REMOVED***
    else:
        backend_name = 'backend_'+backend
        backend_name = backend_name.lower(***REMOVED*** # until we banish mixed case
        backend_name = 'matplotlib.backends.%s'%backend_name.lower(***REMOVED***

    # the last argument is specifies whether to use absolute or relative
    # imports. 0 means only perform absolute imports.
    backend_mod = __import__(backend_name,
                             globals(***REMOVED***,locals(***REMOVED***,[backend_name***REMOVED***,0***REMOVED***

    # Things we pull in from all backends
    new_figure_manager = backend_mod.new_figure_manager

    # image backends like pdf, agg or svg do not need to do anything
    # for "show" or "draw_if_interactive", so if they are not defined
    # by the backend, just do nothing
    def do_nothing_show(*args, **kwargs***REMOVED***:
        frame = inspect.currentframe(***REMOVED***
        fname = frame.f_back.f_code.co_filename
        if fname in ('<stdin>', '<ipython console>'***REMOVED***:
            warnings.warn(***REMOVED***
Your currently selected backend, '%s' does not support show(***REMOVED***.
Please select a GUI backend in your matplotlibrc file ('%s'***REMOVED***
or with matplotlib.use(***REMOVED******REMOVED*** %
                          (backend, matplotlib.matplotlib_fname(***REMOVED******REMOVED******REMOVED***
    def do_nothing(*args, **kwargs***REMOVED***: pass
    backend_version = getattr(backend_mod,'backend_version', 'unknown'***REMOVED***
    show = getattr(backend_mod, 'show', do_nothing_show***REMOVED***
    draw_if_interactive = getattr(backend_mod, 'draw_if_interactive', do_nothing***REMOVED***

    # Additional imports which only happen for certain backends.  This section
    # should probably disappear once all backends are uniform.
    if backend.lower(***REMOVED*** in ['wx','wxagg'***REMOVED***:
        Toolbar = backend_mod.Toolbar
        __all__.append('Toolbar'***REMOVED***

    matplotlib.verbose.report('backend %s version %s' % (backend,backend_version***REMOVED******REMOVED***

    return backend_mod, new_figure_manager, draw_if_interactive, show
