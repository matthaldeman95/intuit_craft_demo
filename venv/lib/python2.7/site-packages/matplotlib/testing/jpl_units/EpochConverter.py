#===========================================================================
#
# EpochConverter
#
#===========================================================================


***REMOVED***EpochConverter module containing class EpochConverter.***REMOVED***

#===========================================================================
# Place all imports after here.
#
from __future__ import (absolute_import, division, print_function,
                        unicode_literals***REMOVED***

from matplotlib.externals import six

import matplotlib.units as units
import matplotlib.dates as date_ticker
from matplotlib.cbook import iterable
#
# Place all imports before here.
#===========================================================================

__all__ = [ 'EpochConverter' ***REMOVED***

#===========================================================================
class EpochConverter( units.ConversionInterface ***REMOVED***:
   ***REMOVED***: A matplotlib converter class.  Provides matplotlib conversion
        functionality for Monte Epoch and Duration classes.
   ***REMOVED***

   # julian date reference for "Jan 1, 0001" minus 1 day because
   # matplotlib really wants "Jan 0, 0001"
   jdRef = 1721425.5 - 1

   #------------------------------------------------------------------------
   @staticmethod
   def axisinfo( unit, axis ***REMOVED***:
      ***REMOVED***: Returns information on how to handle an axis that has Epoch data.

      = INPUT VARIABLES
      - unit    The units to use for a axis with Epoch data.

      = RETURN VALUE
      - Returns a matplotlib AxisInfo data structure that contains
        minor/major formatters, major/minor locators, and default
        label information.
      ***REMOVED***

      majloc = date_ticker.AutoDateLocator(***REMOVED***
      majfmt = date_ticker.AutoDateFormatter( majloc ***REMOVED***

      return units.AxisInfo( majloc = majloc,
                             majfmt = majfmt,
                             label = unit ***REMOVED***

   #------------------------------------------------------------------------
   @staticmethod
   def float2epoch( value, unit ***REMOVED***:
      ***REMOVED***: Convert a matplotlib floating-point date into an Epoch of the
           specified units.

      = INPUT VARIABLES
      - value    The matplotlib floating-point date.
      - unit     The unit system to use for the Epoch.

      = RETURN VALUE
      - Returns the value converted to an Epoch in the sepcified time system.
      ***REMOVED***
      # Delay-load due to circular dependencies.
      import matplotlib.testing.jpl_units as U

      secPastRef = value * 86400.0 * U.UnitDbl( 1.0, 'sec' ***REMOVED***
      return U.Epoch( unit, secPastRef, EpochConverter.jdRef ***REMOVED***

   #------------------------------------------------------------------------
   @staticmethod
   def epoch2float( value, unit ***REMOVED***:
      ***REMOVED***: Convert an Epoch value to a float suitible for plotting as a
           python datetime object.

      = INPUT VARIABLES
      - value   An Epoch or list of Epochs that need to be converted.
      - unit    The units to use for an axis with Epoch data.

      = RETURN VALUE
      - Returns the value parameter converted to floats.
      ***REMOVED***
      return value.julianDate( unit ***REMOVED*** - EpochConverter.jdRef

   #------------------------------------------------------------------------
   @staticmethod
   def duration2float( value ***REMOVED***:
      ***REMOVED***: Convert a Duration value to a float suitible for plotting as a
           python datetime object.

      = INPUT VARIABLES
      - value   A Duration or list of Durations that need to be converted.

      = RETURN VALUE
      - Returns the value parameter converted to floats.
      ***REMOVED***
      return value.days(***REMOVED***

   #------------------------------------------------------------------------
   @staticmethod
   def convert( value, unit, axis ***REMOVED***:
      ***REMOVED***: Convert value using unit to a float.  If value is a sequence, return
      the converted sequence.

      = INPUT VARIABLES
      - value   The value or list of values that need to be converted.
      - unit    The units to use for an axis with Epoch data.

      = RETURN VALUE
      - Returns the value parameter converted to floats.
      ***REMOVED***
      # Delay-load due to circular dependencies.
      import matplotlib.testing.jpl_units as U

      isNotEpoch = True
      isDuration = False

      if ( iterable(value***REMOVED*** and not isinstance(value, six.string_types***REMOVED*** ***REMOVED***:
         if ( len(value***REMOVED*** == 0 ***REMOVED***:
            return [***REMOVED***
         else:
            return [ EpochConverter.convert( x, unit, axis ***REMOVED*** for x in value ***REMOVED***

      if ( isinstance(value, U.Epoch***REMOVED*** ***REMOVED***:
         isNotEpoch = False
      elif ( isinstance(value, U.Duration***REMOVED*** ***REMOVED***:
         isDuration = True

      if ( isNotEpoch and not isDuration and
           units.ConversionInterface.is_numlike( value ***REMOVED*** ***REMOVED***:
         return value

      if ( unit == None ***REMOVED***:
         unit = EpochConverter.default_units( value, axis ***REMOVED***

      if ( isDuration ***REMOVED***:
         return EpochConverter.duration2float( value ***REMOVED***
      else:
         return EpochConverter.epoch2float( value, unit ***REMOVED***

   #------------------------------------------------------------------------
   @staticmethod
   def default_units( value, axis ***REMOVED***:
      ***REMOVED***: Return the default unit for value, or None.

      = INPUT VARIABLES
      - value   The value or list of values that need units.

      = RETURN VALUE
      - Returns the default units to use for value.
      ***REMOVED***
      frame = None
      if ( iterable(value***REMOVED*** and not isinstance(value, six.string_types***REMOVED*** ***REMOVED***:
         return EpochConverter.default_units( value[0***REMOVED***, axis ***REMOVED***
      else:
         frame = value.frame(***REMOVED***

      return frame
