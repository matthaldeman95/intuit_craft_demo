from __future__ import unicode_literals

from django.http import Http404
from django.utils.translation import ugettext as _


def feed(request, url, feed_dict=None***REMOVED***:
    ***REMOVED***Provided for backwards compatibility.***REMOVED***
    if not feed_dict:
        raise Http404(_("No feeds are registered."***REMOVED******REMOVED***

    slug = url.partition('/'***REMOVED***[0***REMOVED***
    ***REMOVED***
        f = feed_dict[slug***REMOVED***
    except KeyError:
        raise Http404(_("Slug %r isn't registered."***REMOVED*** % slug***REMOVED***

    instance = f(***REMOVED***
    instance.feed_url = getattr(f, 'feed_url', None***REMOVED*** or request.path
    instance.title_template = f.title_template or ('feeds/%s_title.html' % slug***REMOVED***
    instance.description_template = f.description_template or ('feeds/%s_description.html' % slug***REMOVED***
    return instance(request***REMOVED***
