***REMOVED***
 The GeometryColumns and SpatialRefSys models for the PostGIS backend.
***REMOVED***
from django.contrib.gis.db.backends.base.models import SpatialRefSysMixin
from django.db import models
from django.utils.encoding import python_2_unicode_compatible


@python_2_unicode_compatible
class PostGISGeometryColumns(models.Model***REMOVED***:
    ***REMOVED***
    The 'geometry_columns' table from the PostGIS. See the PostGIS
    documentation at Ch. 4.3.2.
    On PostGIS 2, this is a view.
    ***REMOVED***
    f_table_catalog = models.CharField(max_length=256***REMOVED***
    f_table_schema = models.CharField(max_length=256***REMOVED***
    f_table_name = models.CharField(max_length=256***REMOVED***
    f_geometry_column = models.CharField(max_length=256***REMOVED***
    coord_dimension = models.IntegerField(***REMOVED***
    srid = models.IntegerField(primary_key=True***REMOVED***
    type = models.CharField(max_length=30***REMOVED***

    class Meta:
        app_label = 'gis'
        db_table = 'geometry_columns'
        managed = False

    @classmethod
    def table_name_col(cls***REMOVED***:
        ***REMOVED***
        Returns the name of the metadata column used to store the feature table
        name.
        ***REMOVED***
        return 'f_table_name'

    @classmethod
    def geom_col_name(cls***REMOVED***:
        ***REMOVED***
        Returns the name of the metadata column used to store the feature
        geometry column.
        ***REMOVED***
        return 'f_geometry_column'

    def __str__(self***REMOVED***:
        return "%s.%s - %dD %s field (SRID: %d***REMOVED***" % \
               (self.f_table_name, self.f_geometry_column,
                self.coord_dimension, self.type, self.srid***REMOVED***


class PostGISSpatialRefSys(models.Model, SpatialRefSysMixin***REMOVED***:
    ***REMOVED***
    The 'spatial_ref_sys' table from PostGIS. See the PostGIS
    documentation at Ch. 4.2.1.
    ***REMOVED***
    srid = models.IntegerField(primary_key=True***REMOVED***
    auth_name = models.CharField(max_length=256***REMOVED***
    auth_srid = models.IntegerField(***REMOVED***
    srtext = models.CharField(max_length=2048***REMOVED***
    proj4text = models.CharField(max_length=2048***REMOVED***

    class Meta:
        app_label = 'gis'
        db_table = 'spatial_ref_sys'
        managed = False

    @property
    def wkt(self***REMOVED***:
        return self.srtext
