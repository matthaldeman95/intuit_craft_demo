from __future__ import unicode_literals

***REMOVED***

from django.contrib.staticfiles import finders
from django.core.management.base import LabelCommand
from django.utils.encoding import force_text


class Command(LabelCommand***REMOVED***:
    help = "Finds the absolute paths for the given static file(s***REMOVED***."
    label = 'staticfile'

    def add_arguments(self, parser***REMOVED***:
        super(Command, self***REMOVED***.add_arguments(parser***REMOVED***
        parser.add_argument(
            '--first', action='store_false', dest='all',
            default=True,
            help="Only return the first match for each static file.",
        ***REMOVED***

    def handle_label(self, path, **options***REMOVED***:
        verbosity = options['verbosity'***REMOVED***
        result = finders.find(path, all=options['all'***REMOVED******REMOVED***
        path = force_text(path***REMOVED***
        if verbosity >= 2:
            searched_locations = (
                "\nLooking in the following locations:\n  %s" %
                "\n  ".join(force_text(location***REMOVED*** for location in finders.searched_locations***REMOVED***
            ***REMOVED***
        else:
            searched_locations = ''
        if result:
            if not isinstance(result, (list, tuple***REMOVED******REMOVED***:
                result = [result***REMOVED***
            result = (force_text(os.path.realpath(path***REMOVED******REMOVED*** for path in result***REMOVED***
            if verbosity >= 1:
                file_list = '\n  '.join(result***REMOVED***
                return ("Found '%s' here:\n  %s%s" %
                        (path, file_list, searched_locations***REMOVED******REMOVED***
            else:
                return '\n'.join(result***REMOVED***
        else:
            message = ["No matching file found for '%s'." % path***REMOVED***
            if verbosity >= 2:
                message.append(searched_locations***REMOVED***
            if verbosity >= 1:
                self.stderr.write('\n'.join(message***REMOVED******REMOVED***
