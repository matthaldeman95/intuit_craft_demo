***REMOVED***
Backend for test environment.
***REMOVED***

from django.core import mail
from django.core.mail.backends.base import BaseEmailBackend


class EmailBackend(BaseEmailBackend***REMOVED***:
    ***REMOVED***A email backend for use during test sessions.

    The test connection stores email messages in a dummy outbox,
    rather than sending them out on the wire.

    The dummy outbox is accessible through the outbox instance attribute.
    ***REMOVED***
    def __init__(self, *args, **kwargs***REMOVED***:
        super(EmailBackend, self***REMOVED***.__init__(*args, **kwargs***REMOVED***
        if not hasattr(mail, 'outbox'***REMOVED***:
            mail.outbox = [***REMOVED***

    def send_messages(self, messages***REMOVED***:
        ***REMOVED***Redirect messages to the dummy outbox***REMOVED***
        msg_count = 0
        for message in messages:  # .message(***REMOVED*** triggers header validation
            message.message(***REMOVED***
            msg_count += 1
        mail.outbox.extend(messages***REMOVED***
        return msg_count
