from functools import wraps

from django.utils.cache import patch_vary_headers
from django.utils.decorators import available_attrs


def vary_on_headers(*headers***REMOVED***:
    ***REMOVED***
    A view decorator that adds the specified headers to the Vary header of the
    response. Usage:

       @vary_on_headers('Cookie', 'Accept-language'***REMOVED***
       def index(request***REMOVED***:
           ...

    Note that the header names are not case-sensitive.
    ***REMOVED***
    def decorator(func***REMOVED***:
        @wraps(func, assigned=available_attrs(func***REMOVED******REMOVED***
        def inner_func(*args, **kwargs***REMOVED***:
            response = func(*args, **kwargs***REMOVED***
            patch_vary_headers(response, headers***REMOVED***
            return response
        return inner_func
    return decorator


def vary_on_cookie(func***REMOVED***:
    ***REMOVED***
    A view decorator that adds "Cookie" to the Vary header of a response. This
    indicates that a page's contents depends on cookies. Usage:

        @vary_on_cookie
        def index(request***REMOVED***:
            ...
    ***REMOVED***
    @wraps(func, assigned=available_attrs(func***REMOVED******REMOVED***
    def inner_func(*args, **kwargs***REMOVED***:
        response = func(*args, **kwargs***REMOVED***
        patch_vary_headers(response, ('Cookie',***REMOVED******REMOVED***
        return response
    return inner_func
