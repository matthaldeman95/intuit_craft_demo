***REMOVED***
Utilities for XML generation/parsing.
***REMOVED***

import re
from xml.sax.saxutils import XMLGenerator


class UnserializableContentError(ValueError***REMOVED***:
    pass


class SimplerXMLGenerator(XMLGenerator***REMOVED***:
    def addQuickElement(self, name, contents=None, attrs=None***REMOVED***:
        "Convenience method for adding an element with no children"
        if attrs is None:
            attrs = {***REMOVED***
        self.startElement(name, attrs***REMOVED***
        if contents is not None:
            self.characters(contents***REMOVED***
        self.endElement(name***REMOVED***

    def characters(self, content***REMOVED***:
        if content and re.search(r'[\x00-\x08\x0B-\x0C\x0E-\x1F***REMOVED***', content***REMOVED***:
            # Fail loudly when content has control chars (unsupported in XML 1.0***REMOVED***
            # See http://www.w3.org/International/questions/qa-controls
            raise UnserializableContentError("Control characters are not supported in XML 1.0"***REMOVED***
        XMLGenerator.characters(self, content***REMOVED***
