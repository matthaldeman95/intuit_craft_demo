import unittest

from wheel.pep425tags import get_supported
from wheel.install import WheelFile

WHEELPAT = "%(name***REMOVED***s-%(ver***REMOVED***s-%(pyver***REMOVED***s-%(abi***REMOVED***s-%(arch***REMOVED***s.whl"
def make_wheel(name, ver, pyver, abi, arch***REMOVED***:
    name = WHEELPAT % dict(name=name, ver=ver, pyver=pyver, abi=abi,
            arch=arch***REMOVED***
    return WheelFile(name***REMOVED***

# This relies on the fact that generate_supported will always return the
# exact pyver, abi, and architecture for its first (best***REMOVED*** match.
sup = get_supported(***REMOVED***
pyver, abi, arch = sup[0***REMOVED***
genver = 'py' + pyver[2:***REMOVED***
majver = genver[:3***REMOVED***

COMBINATIONS = (
    ('bar', '0.9', 'py2.py3', 'none', 'any'***REMOVED***,
    ('bar', '0.9', majver, 'none', 'any'***REMOVED***,
    ('bar', '0.9', genver, 'none', 'any'***REMOVED***,
    ('bar', '0.9', pyver, abi, arch***REMOVED***,
    ('bar', '1.3.2', majver, 'none', 'any'***REMOVED***,
    ('bar', '3.1', genver, 'none', 'any'***REMOVED***,
    ('bar', '3.1', pyver, abi, arch***REMOVED***,
    ('foo', '1.0', majver, 'none', 'any'***REMOVED***,
    ('foo', '1.1', pyver, abi, arch***REMOVED***,
    ('foo', '2.1', majver + '0', 'none', 'any'***REMOVED***,
    # This will not be compatible for Python x.0. Beware when we hit Python
    # 4.0, and don't test with 3.0!!!
    ('foo', '2.1', majver + '1', 'none', 'any'***REMOVED***,
    ('foo', '2.1', pyver , 'none', 'any'***REMOVED***,
    ('foo', '2.1', pyver , abi, arch***REMOVED***,
***REMOVED***

WHEELS = [ make_wheel(*args***REMOVED*** for args in COMBINATIONS ***REMOVED***

class TestRanking(unittest.TestCase***REMOVED***:
    def test_comparison(self***REMOVED***:
        for i in range(len(WHEELS***REMOVED***-1***REMOVED***:
            for j in range(i***REMOVED***:
                self.assertTrue(WHEELS[j***REMOVED***<WHEELS[i***REMOVED******REMOVED***
