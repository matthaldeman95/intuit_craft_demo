
from matplotlib.testing.decorators import image_comparison
from mpl_toolkits.axes_grid1 import ImageGrid
import numpy as np
import matplotlib.pyplot as plt


@image_comparison(baseline_images=['imagegrid_cbar_mode'***REMOVED***,
                  extensions=['png'***REMOVED***,
                  remove_text=True***REMOVED***
def test_imagegrid_cbar_mode_edge(***REMOVED***:
    X, Y = np.meshgrid(np.linspace(0, 6, 30***REMOVED***, np.linspace(0, 6, 30***REMOVED******REMOVED***
    arr = np.sin(X***REMOVED*** * np.cos(Y***REMOVED*** + 1j*(np.sin(3*Y***REMOVED*** * np.cos(Y/2.***REMOVED******REMOVED***

    fig = plt.figure(figsize=(18, 9***REMOVED******REMOVED***

    positions = (241, 242, 243, 244, 245, 246, 247, 248***REMOVED***
    directions = ['row'***REMOVED****4 + ['column'***REMOVED****4
    cbar_locations = ['left', 'right', 'top', 'bottom'***REMOVED****2

    for position, direction, location in zip(positions,
                                             directions,
                                             cbar_locations***REMOVED***:
        grid = ImageGrid(fig, position,
                         nrows_ncols=(2, 2***REMOVED***,
                         direction=direction,
                         cbar_location=location,
                         cbar_size='20%',
                         cbar_mode='edge'***REMOVED***
        ax1, ax2, ax3, ax4, = grid

        im1 = ax1.imshow(arr.real, cmap='spectral'***REMOVED***
        im2 = ax2.imshow(arr.imag, cmap='hot'***REMOVED***
        im3 = ax3.imshow(np.abs(arr***REMOVED***, cmap='jet'***REMOVED***
        im4 = ax4.imshow(np.arctan2(arr.imag, arr.real***REMOVED***, cmap='hsv'***REMOVED***

        # Some of these colorbars will be overridden by later ones,
        # depending on the direction and cbar_location
        ax1.cax.colorbar(im1***REMOVED***
        ax2.cax.colorbar(im2***REMOVED***
        ax3.cax.colorbar(im3***REMOVED***
        ax4.cax.colorbar(im4***REMOVED***
